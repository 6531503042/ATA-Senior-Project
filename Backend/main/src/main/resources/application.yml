spring:
  application:
    name: main
  r2dbc:
    url: r2dbc:postgresql://localhost:5432/senior
    username: postgres
    password: admin
  datasource:
    url: jdbc:postgresql://localhost:5432/senior
    username: postgres
    password: admin
    driver-class-name: org.postgresql.Driver
  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true
    out-of-order: true
    validate-on-migrate: false
  jackson:
    serialization:
      WRITE_DATES_AS_TIMESTAMPS: false
  webflux:
    base-path: /

# Application Configuration
app:
  # Seeder removed; rely solely on Flyway migrations
  # Security and CORS Configuration
  allowed-origins: "*"
  security:
    # Rate limiting configuration - COMPLETELY DISABLED
    rate-limit:
      enabled: false  # Disabled rate limiting
      requests-per-minute: 10000  # Very high limit if somehow enabled
      auth-requests-per-minute: 1000  # Very high limit if somehow enabled
      burst-capacity: 1000
      window-size: 60
    # CORS settings
    cors:
      max-age: 3600
      allow-credentials: true
    # Session management
    session:
      concurrent-sessions: 3
      prevent-login-if-maximum: false
    # Security headers
    headers:
      frame-options: DENY
      content-type-options: true
      xss-protection: true
      referrer-policy: STRICT_ORIGIN_WHEN_CROSS_ORIGIN
      hsts-max-age: 31536000

server:
  port: 8080

logging:
  level:
    root: INFO
    org.springframework.r2dbc: INFO
    io.r2dbc.postgresql: WARN
    io.r2dbc.postgresql.QUERY: WARN
    io.r2dbc.postgresql.client.ReactorNettyClient: WARN
    reactor.netty: WARN
    org.springframework.security: INFO

jwt:
  # Use plain string or base64:<encoded>; both are supported. Plain strings shorter than 32 bytes will be SHA-256 expanded.
  secret: 9b565deb729cf3201a19c54af3b31afbae6819226c0f1adb2e524fd121973f1c54f74048
  expiration: 3600000 # 1 hour in ms
  refresh-expiration: 604800000 # 7 days in ms

