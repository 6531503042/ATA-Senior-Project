server {
    listen 80;
    server_name localhost;
    
    # Enable CORS for preflight OPTIONS requests
    location ~ ^/(.*) {
        if ($request_method = 'OPTIONS') {
            add_header 'Access-Control-Allow-Origin' 'http://localhost:3000';
            add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE, PATCH';
            add_header 'Access-Control-Allow-Headers' 'Authorization, Content-Type, Accept, Origin, X-Requested-With';
            add_header 'Access-Control-Allow-Credentials' 'true';
            add_header 'Content-Type' 'text/plain charset=UTF-8';
            add_header 'Content-Length' '0';
            return 204;
        }
    }
    
    location / {
        root /usr/share/nginx/html;
        index index.html index.htm;
        
        # CORS headers
        add_header 'Access-Control-Allow-Origin' 'http://localhost:3000' always;
        add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE' always;
        add_header 'Access-Control-Allow-Headers' 'X-Requested-With, Content-Type, Authorization' always;
        add_header 'Access-Control-Allow-Credentials' 'true' always;
    }

    # Fixed health check endpoint
    location = /health {
        add_header Content-Type application/json;
        add_header 'Access-Control-Allow-Origin' 'http://localhost:3000' always;
        add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE' always;
        add_header 'Access-Control-Allow-Headers' 'X-Requested-With, Content-Type, Authorization' always;
        add_header 'Access-Control-Allow-Credentials' 'true' always;
        return 200 '{"status":"UP"}';
    }

    # Handle preflight OPTIONS requests
    location ~ ^/(api|health) {
        if ($request_method = 'OPTIONS') {
            add_header 'Access-Control-Allow-Origin' 'http://localhost:3000' always;
            add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE' always;
            add_header 'Access-Control-Allow-Headers' 'X-Requested-With, Content-Type, Authorization' always;
            add_header 'Access-Control-Allow-Credentials' 'true' always;
            add_header 'Content-Type' 'text/plain charset=UTF-8';
            add_header 'Content-Length' 0;
            return 204;
        }
    }

#     # Employee feedbacks endpoint
#     location = /api/employee/feedbacks {
#         default_type application/json;
#         return 200 '[
#             {
#                 "id": 1,
#                 "title": "Annual Performance Review",
#                 "description": "Please complete your annual performance self-assessment",
#                 "questions": [
#                     {
#                         "id": 101,
#                         "text": "How would you rate your overall performance this year?",
#                         "description": "Consider your achievements, challenges, and growth",
#                         "type": "RATING",
#                         "required": true,
#                         "options": ["1", "2", "3", "4", "5"]
#                     },
#                     {
#                         "id": 102,
#                         "text": "What were your key accomplishments?",
#                         "description": "List your major achievements and contributions",
#                         "type": "TEXT_BASED",
#                         "required": true
#                     },
#                     {
#                         "id": 103,
#                         "text": "Which areas do you think you need improvement?",
#                         "description": "Be honest about skills or knowledge gaps",
#                         "type": "TEXT_BASED",
#                         "required": true
#                     },
#                     {
#                         "id": 104,
#                         "text": "Select skills you would like to develop",
#                         "description": "Choose areas for professional growth",
#                         "type": "MULTIPLE_CHOICE",
#                         "required": false,
#                         "options": ["Technical", "Leadership", "Communication", "Project Management", "Time Management"]
#                     }
#                 ]
#             },
#             {
#                 "id": 2,
#                 "title": "Project Feedback",
#                 "description": "Share your experience working on the recent project",
#                 "questions": [
#                     {
#                         "id": 201,
#                         "text": "How satisfied are you with the project outcome?",
#                         "description": "Rate your satisfaction with the project results",
#                         "type": "RATING",
#                         "required": true,
#                         "options": ["1", "2", "3", "4", "5"]
#                     },
#                     {
#                         "id": 202,
#                         "text": "What went well during the project?",
#                         "description": "Highlight positive aspects",
#                         "type": "TEXT_BASED",
#                         "required": true
#                     },
#                     {
#                         "id": 203,
#                         "text": "What could have been improved?",
#                         "description": "Identify areas for improvement",
#                         "type": "TEXT_BASED",
#                         "required": true
#                     }
#                 ]
#             }
#         ]';

#         # CORS headers
#         add_header 'Access-Control-Allow-Origin' 'http://localhost:3000' always;
#         add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE' always;
#         add_header 'Access-Control-Allow-Headers' 'X-Requested-With, Content-Type, Authorization' always;
#         add_header 'Access-Control-Allow-Credentials' 'true' always;
#     }

#     # API mock endpoints
#     location /api/v1/feedback {
#         default_type application/json;
#         return 200 '[{"id": 1, "employeeId": 101, "managerId": 201, "rating": 4, "comment": "Great work on the project!", "date": "2025-01-15T10:30:00Z"}, {"id": 2, "employeeId": 102, "managerId": 201, "rating": 3, "comment": "Good effort, but room for improvement", "date": "2025-01-16T14:45:00Z"}]';

#         # CORS headers
#         add_header 'Access-Control-Allow-Origin' 'http://localhost:3000' always;
#         add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE' always;
#         add_header 'Access-Control-Allow-Headers' 'X-Requested-With, Content-Type, Authorization' always;
#         add_header 'Access-Control-Allow-Credentials' 'true' always;
#     }

#     # Submit feedback endpoint
#     location /api/submit-feedback {
#         default_type application/json;
#         return 201 '{"id": 3, "message": "Feedback submitted successfully"}';

#         # CORS headers
#         add_header 'Access-Control-Allow-Origin' 'http://localhost:3000' always;
#         add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE' always;
#         add_header 'Access-Control-Allow-Headers' 'X-Requested-With, Content-Type, Authorization' always;
#         add_header 'Access-Control-Allow-Credentials' 'true' always;
#     }

#     location /api/v1/feedback/submit {
#         default_type application/json;
#         return 201 '{"id": 3, "message": "Feedback submitted successfully"}';

#         # CORS headers
#         add_header 'Access-Control-Allow-Origin' 'http://localhost:3000' always;
#         add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE' always;
#         add_header 'Access-Control-Allow-Headers' 'X-Requested-With, Content-Type, Authorization' always;
#         add_header 'Access-Control-Allow-Credentials' 'true' always;
#     }

#     location /api/v1/feedback/employee/101 {
#         default_type application/json;
#         return 200 '[{"id": 1, "employeeId": 101, "managerId": 201, "rating": 4, "comment": "Great work on the project!", "date": "2025-01-15T10:30:00Z"}]';

#         # CORS headers
#         add_header 'Access-Control-Allow-Origin' 'http://localhost:3000' always;
#         add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE' always;
#         add_header 'Access-Control-Allow-Headers' 'X-Requested-With, Content-Type, Authorization' always;
#         add_header 'Access-Control-Allow-Credentials' 'true' always;
#     }

#     # Available feedbacks endpoint
#     location = /api/available-feedbacks {
#         default_type application/json;
#         return 200 '[
#             {
#                 "id": 1,
#                 "title": "Annual Performance Review",
#                 "description": "Please complete your annual performance self-assessment",
#                 "questions": [
#                     {
#                         "id": 101,
#                         "text": "How would you rate your overall performance this year?",
#                         "description": "Consider your achievements, challenges, and growth",
#                         "type": "RATING",
#                         "required": true,
#                         "options": ["1", "2", "3", "4", "5"]
#                     },
#                     {
#                         "id": 102,
#                         "text": "What were your key accomplishments?",
#                         "description": "List your major achievements and contributions",
#                         "type": "TEXT_BASED",
#                         "required": true
#                     },
#                     {
#                         "id": 103,
#                         "text": "Which areas do you think you need improvement?",
#                         "description": "Be honest about skills or knowledge gaps",
#                         "type": "TEXT_BASED",
#                         "required": true
#                     },
#                     {
#                         "id": 104,
#                         "text": "Select skills you would like to develop",
#                         "description": "Choose areas for professional growth",
#                         "type": "MULTIPLE_CHOICE",
#                         "required": false,
#                         "options": ["Technical", "Leadership", "Communication", "Project Management", "Time Management"]
#                     }
#                 ]
#             },
#             {
#                 "id": 2,
#                 "title": "Project Feedback",
#                 "description": "Share your experience working on the recent project",
#                 "questions": [
#                     {
#                         "id": 201,
#                         "text": "How satisfied are you with the project outcome?",
#                         "description": "Rate your satisfaction with the project results",
#                         "type": "RATING",
#                         "required": true,
#                         "options": ["1", "2", "3", "4", "5"]
#                     },
#                     {
#                         "id": 202,
#                         "text": "What went well during the project?",
#                         "description": "Highlight positive aspects",
#                         "type": "TEXT_BASED",
#                         "required": true
#                     },
#                     {
#                         "id": 203,
#                         "text": "What could have been improved?",
#                         "description": "Identify areas for improvement",
#                         "type": "TEXT_BASED",
#                         "required": true
#                     }
#                 ]
#             }
#         ]';

#         # CORS headers
#         add_header 'Access-Control-Allow-Origin' 'http://localhost:3000' always;
#         add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE' always;
#         add_header 'Access-Control-Allow-Headers' 'X-Requested-With, Content-Type, Authorization' always;
#         add_header 'Access-Control-Allow-Credentials' 'true' always;
#     }

#     # Project metrics endpoint (specific)
#     location = /api/v1/dashboard/projects/metrics {
#         default_type application/json;
#         add_header 'Access-Control-Allow-Origin' 'http://localhost:3000' always;
#         add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE, PATCH' always;
#         add_header 'Access-Control-Allow-Headers' 'Authorization, Content-Type, Accept, Origin, X-Requested-With' always;
#         add_header 'Access-Control-Allow-Credentials' 'true' always;
#         return 200 '{
#             "totalProjects": 5,
#             "activeProjects": 3,
#             "completedProjects": 2,
#             "projectsByMonth": {
#                 "labels": ["Jan", "Feb", "Mar", "Apr", "May", "Jun"],
#                 "data": [1, 2, 0, 1, 1, 0]
#             },
#             "feedbackCompletionRate": 75
#         }';
#     }

#     # Project create endpoint (specific)
#     location = /api/v1/admin/projects/create {
#         default_type application/json;
#         add_header 'Access-Control-Allow-Origin' 'http://localhost:3000' always;
#         add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE, PATCH' always;
#         add_header 'Access-Control-Allow-Headers' 'Authorization, Content-Type, Accept, Origin, X-Requested-With' always;
#         add_header 'Access-Control-Allow-Credentials' 'true' always;
#         return 201 '{
#             "id": 6,
#             "name": "New Project",
#             "description": "Project created by admin",
#             "startDate": "2025-04-01",
#             "endDate": "2025-09-30",
#             "status": "ACTIVE",
#             "message": "Project created successfully"
#         }';
#     }

#     # Project list endpoint - use exact match without regex
#     location = /api/v1/admin/projects/all {
#         default_type application/json;
#         add_header 'Access-Control-Allow-Origin' 'http://localhost:3000' always;
#         add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE, PATCH' always;
#         add_header 'Access-Control-Allow-Headers' 'Authorization, Content-Type, Accept, Origin, X-Requested-With' always;
#         add_header 'Access-Control-Allow-Credentials' 'true' always;
#         return 200 '{
#             "content": [
#                 {
#                     "id": 1,
#                     "name": "Mobile Banking App Redesign",
#                     "description": "Redesign of the mobile banking application UI/UX",
#                     "startDate": "2025-01-01",
#                     "endDate": "2025-03-31",
#                     "status": "ACTIVE",
#                     "managerIds": [1, 2],
#                     "employeeIds": [101, 102, 103]
#                 },
#                 {
#                     "id": 2,
#                     "name": "Fraud Detection System",
#                     "description": "Implementation of AI-based fraud detection system",
#                     "startDate": "2025-02-15",
#                     "endDate": "2025-07-15", 
#                     "status": "ACTIVE",
#                     "managerIds": [3],
#                     "employeeIds": [103, 104, 105]
#                 },
#                 {
#                     "id": 3,
#                     "name": "Customer Onboarding Process",
#                     "description": "Streamlining the customer onboarding workflow",
#                     "startDate": "2024-11-01",
#                     "endDate": "2025-01-15",
#                     "status": "COMPLETED",
#                     "managerIds": [2, 4],
#                     "employeeIds": [101, 105]
#                 },
#                 {
#                     "id": 4,
#                     "name": "Security Audit",
#                     "description": "Annual security audit and compliance check",
#                     "startDate": "2024-10-01",
#                     "endDate": "2024-12-15",
#                     "status": "COMPLETED",
#                     "managerIds": [5],
#                     "employeeIds": [102, 104]
#                 },
#                 {
#                     "id": 5,
#                     "name": "Digital Transformation Initiative",
#                     "description": "Bank-wide digital transformation strategy implementation",
#                     "startDate": "2025-03-01",
#                     "endDate": "2025-12-31",
#                     "status": "ACTIVE",
#                     "managerIds": [1, 3, 5],
#                     "employeeIds": [101, 102, 103, 104, 105]
#                 }
#             ],
#             "pageable": {
#                 "pageNumber": 0,
#                 "pageSize": 10,
#                 "totalElements": 5,
#                 "totalPages": 1
#             }
#         }';
#     }
    
#     # Project list with query parameters
#     location ~ ^/api/v1/admin/projects/all\?.* {
#         default_type application/json;
#         add_header 'Access-Control-Allow-Origin' 'http://localhost:3000' always;
#         add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE, PATCH' always;
#         add_header 'Access-Control-Allow-Headers' 'Authorization, Content-Type, Accept, Origin, X-Requested-With' always;
#         add_header 'Access-Control-Allow-Credentials' 'true' always;
#         return 200 '{
#             "content": [
#                 {
#                     "id": 1,
#                     "name": "Mobile Banking App Redesign",
#                     "description": "Redesign of the mobile banking application UI/UX",
#                     "startDate": "2025-01-01",
#                     "endDate": "2025-03-31",
#                     "status": "ACTIVE",
#                     "managerIds": [1, 2],
#                     "employeeIds": [101, 102, 103]
#                 },
#                 {
#                     "id": 2,
#                     "name": "Fraud Detection System",
#                     "description": "Implementation of AI-based fraud detection system",
#                     "startDate": "2025-02-15",
#                     "endDate": "2025-07-15", 
#                     "status": "ACTIVE",
#                     "managerIds": [3],
#                     "employeeIds": [103, 104, 105]
#                 },
#                 {
#                     "id": 3,
#                     "name": "Customer Onboarding Process",
#                     "description": "Streamlining the customer onboarding workflow",
#                     "startDate": "2024-11-01",
#                     "endDate": "2025-01-15",
#                     "status": "COMPLETED",
#                     "managerIds": [2, 4],
#                     "employeeIds": [101, 105]
#                 },
#                 {
#                     "id": 4,
#                     "name": "Security Audit",
#                     "description": "Annual security audit and compliance check",
#                     "startDate": "2024-10-01",
#                     "endDate": "2024-12-15",
#                     "status": "COMPLETED",
#                     "managerIds": [5],
#                     "employeeIds": [102, 104]
#                 },
#                 {
#                     "id": 5,
#                     "name": "Digital Transformation Initiative",
#                     "description": "Bank-wide digital transformation strategy implementation",
#                     "startDate": "2025-03-01",
#                     "endDate": "2025-12-31",
#                     "status": "ACTIVE",
#                     "managerIds": [1, 3, 5],
#                     "employeeIds": [101, 102, 103, 104, 105]
#                 }
#             ],
#             "pageable": {
#                 "pageNumber": 0,
#                 "pageSize": 10,
#                 "totalElements": 5,
#                 "totalPages": 1
#             }
#         }';
#     }

#     # Project details endpoint
#     location ~ ^/api/v1/admin/projects/([0-9]+)$ {
#         default_type application/json;
#         add_header 'Access-Control-Allow-Origin' 'http://localhost:3000' always;
#         add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE, PATCH' always;
#         add_header 'Access-Control-Allow-Headers' 'Authorization, Content-Type, Accept, Origin, X-Requested-With' always;
#         add_header 'Access-Control-Allow-Credentials' 'true' always;
        
#         set $project_id $1;
        
#         if ($project_id = "1") {
#             return 200 '{
#                 "id": 1,
#                 "name": "Mobile Banking App Redesign",
#                 "description": "Redesign of the mobile banking application UI/UX",
#                 "startDate": "2025-01-01",
#                 "endDate": "2025-03-31",
#                 "status": "ACTIVE",
#                 "managerIds": [1, 2],
#                 "employeeIds": [101, 102, 103],
#                 "feedbacks": [
#                     {
#                         "id": 1001,
#                         "employeeId": 101,
#                         "managerId": 1,
#                         "submissionDate": "2025-02-15",
#                         "status": "COMPLETED"
#                     },
#                     {
#                         "id": 1002,
#                         "employeeId": 102,
#                         "managerId": 2,
#                         "submissionDate": "2025-02-20",
#                         "status": "COMPLETED"
#                     },
#                     {
#                         "id": 1003,
#                         "employeeId": 103,
#                         "managerId": 1,
#                         "submissionDate": null,
#                         "status": "PENDING"
#                     }
#                 ]
#             }';
#         }
        
#         # Default project data
#         return 200 '{
#             "id": $project_id,
#             "name": "Project $project_id",
#             "description": "Description for project $project_id",
#             "startDate": "2025-01-01",
#             "endDate": "2025-06-30",
#             "status": "ACTIVE",
#             "managerIds": [1],
#             "employeeIds": [101, 102],
#             "feedbacks": []
#         }';
#     }
    
#     # Project update endpoint
#     location ~ ^/api/v1/admin/projects/([0-9]+)/update$ {
#         default_type application/json;
#         add_header 'Access-Control-Allow-Origin' 'http://localhost:3000' always;
#         add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE, PATCH' always;
#         add_header 'Access-Control-Allow-Headers' 'Authorization, Content-Type, Accept, Origin, X-Requested-With' always;
#         add_header 'Access-Control-Allow-Credentials' 'true' always;
        
#         return 200 '{
#             "id": $1,
#             "message": "Project updated successfully"
#         }';
#     }
    
#     # Employee's projects endpoint
#     location = /api/v1/employee/projects {
#         default_type application/json;
#         add_header 'Access-Control-Allow-Origin' 'http://localhost:3000' always;
#         add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE, PATCH' always;
#         add_header 'Access-Control-Allow-Headers' 'Authorization, Content-Type, Accept, Origin, X-Requested-With' always;
#         add_header 'Access-Control-Allow-Credentials' 'true' always;
        
#         return 200 '{
#             "content": [
#                 {
#                     "id": 1,
#                     "name": "Mobile Banking App Redesign",
#                     "description": "Redesign of the mobile banking application UI/UX",
#                     "startDate": "2025-01-01",
#                     "endDate": "2025-03-31",
#                     "status": "ACTIVE",
#                     "feedbackStatus": "COMPLETED"
#                 },
#                 {
#                     "id": 2,
#                     "name": "Fraud Detection System",
#                     "description": "Implementation of AI-based fraud detection system",
#                     "startDate": "2025-02-15",
#                     "endDate": "2025-07-15", 
#                     "status": "ACTIVE",
#                     "feedbackStatus": "PENDING"
#                 },
#                 {
#                     "id": 5,
#                     "name": "Digital Transformation Initiative",
#                     "description": "Bank-wide digital transformation strategy implementation",
#                     "startDate": "2025-03-01",
#                     "endDate": "2025-12-31",
#                     "status": "ACTIVE",
#                     "feedbackStatus": "NOT_STARTED"
#                 }
#             ],
#             "pageable": {
#                 "pageNumber": 0,
#                 "pageSize": 10,
#                 "totalElements": 3,
#                 "totalPages": 1
#             }
#         }';
#     }
    
#     # Employee feedback detail endpoint
#     location ~ ^/api/v1/employee/projects/([0-9]+)/feedback$ {
#         default_type application/json;
#         add_header 'Access-Control-Allow-Origin' 'http://localhost:3000' always;
#         add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE, PATCH' always;
#         add_header 'Access-Control-Allow-Headers' 'Authorization, Content-Type, Accept, Origin, X-Requested-With' always;
#         add_header 'Access-Control-Allow-Credentials' 'true' always;
        
#         set $project_id $1;
        
#         if ($project_id = "1") {
#             return 200 '{
#                 "id": 1001,
#                 "projectId": 1,
#                 "projectName": "Mobile Banking App Redesign",
#                 "employeeId": 101,
#                 "managerId": 1,
#                 "submissionDate": "2025-02-15",
#                 "status": "COMPLETED",
#                 "responses": [
#                     {
#                         "questionId": 101,
#                         "response": "4"
#                     },
#                     {
#                         "questionId": 102,
#                         "response": "Successfully implemented the new UI design for mobile banking app."
#                     },
#                     {
#                         "questionId": 103,
#                         "response": "Could improve documentation and test coverage."
#                     },
#                     {
#                         "questionId": 104,
#                         "response": ["Technical", "Communication"]
#                     }
#                 ]
#             }';
#         }
        
#         # Default - feedback not found or not yet submitted
#         if ($request_method = "GET") {
#             return 404 '{
#                 "message": "Feedback not found for this project",
#                 "projectId": $project_id
#             }';
#         }
        
#         # For POST requests (submit)
#         return 201 '{
#             "id": 2000,
#             "projectId": $project_id,
#             "message": "Feedback submitted successfully",
#             "status": "COMPLETED",
#             "submissionDate": "2025-03-21"
#         }';
#     }
    
#     # Manager's assigned employees endpoint
#     location = /api/v1/manager/employees {
#         default_type application/json;
#         add_header 'Access-Control-Allow-Origin' 'http://localhost:3000' always;
#         add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE, PATCH' always;
#         add_header 'Access-Control-Allow-Headers' 'Authorization, Content-Type, Accept, Origin, X-Requested-With' always;
#         add_header 'Access-Control-Allow-Credentials' 'true' always;
        
#         return 200 '{
#             "content": [
#                 {
#                     "id": 101,
#                     "name": "John Davis",
#                     "email": "john.davis@bank.com",
#                     "department": "Development",
#                     "position": "Senior Developer",
#                     "projectCount": 3
#                 },
#                 {
#                     "id": 102,
#                     "name": "Sarah Wilson",
#                     "email": "sarah.wilson@bank.com",
#                     "department": "UX Design",
#                     "position": "UI/UX Designer",
#                     "projectCount": 2
#                 },
#                 {
#                     "id": 103,
#                     "name": "Michael Brown",
#                     "email": "michael.brown@bank.com",
#                     "department": "Development",
#                     "position": "Full Stack Developer",
#                     "projectCount": 3
#                 }
#             ],
#             "pageable": {
#                 "pageNumber": 0,
#                 "pageSize": 10,
#                 "totalElements": 3,
#                 "totalPages": 1
#             }
#         }';
#     }

#     # Remove duplicate project endpoints from the generic location block
#     location ~ ^/api/v1/ {
#         default_type application/json;
        
#         # Handle OPTIONS request first
#         if ($request_method = 'OPTIONS') {
#             add_header 'Access-Control-Allow-Origin' 'http://localhost:3000' always;
#             add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE, PATCH' always;
#             add_header 'Access-Control-Allow-Headers' 'Authorization, Content-Type, Accept, Origin, X-Requested-With' always;
#             add_header 'Access-Control-Allow-Credentials' 'true' always;
#             add_header 'Content-Type' 'text/plain charset=UTF-8';
#             add_header 'Content-Length' 0;
#             return 204;
#         }

#         # Default response for unknown API endpoints
#         return 200 '{"status": "success", "message": "Mocked API response"}';

#         # CORS headers - always apply these
#         add_header 'Access-Control-Allow-Origin' 'http://localhost:3000' always;
#         add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE, PATCH' always;
#         add_header 'Access-Control-Allow-Headers' 'Authorization, Content-Type, Accept, Origin, X-Requested-With' always;
#         add_header 'Access-Control-Allow-Credentials' 'true' always;
#     }

#     # Test endpoint for debugging
#     location = /test {
#         default_type application/json;
#         add_header 'Access-Control-Allow-Origin' 'http://localhost:3000' always;
#         return 200 '{"message": "Test endpoint is working!"}';
#     }

#     # Debug info for API path
#     location = /api-debug {
#         default_type text/plain;
#         add_header 'Access-Control-Allow-Origin' 'http://localhost:3000' always;
#         return 200 "
# URI: $request_uri
# Path: $uri
# Method: $request_method
# Host: $host
# Server: $server_addr:$server_port
# ";
#     }
# } 